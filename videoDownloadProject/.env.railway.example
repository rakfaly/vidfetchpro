# Railway production environment template
# Set these in BOTH web and worker services (except web-only lines marked below)

DJANGO_SETTINGS_MODULE=core.settings_prod
DEBUG=False
SECRET_KEY=replace-with-a-long-random-secret

# Railway Postgres references (select from your Postgres service variables)
DB_NAME=${{Postgres.PGDATABASE}}
DB_USER=${{Postgres.PGUSER}}
DB_PASSWORD=${{Postgres.PGPASSWORD}}
DB_HOST=${{Postgres.PGHOST}}
DB_PORT=${{Postgres.PGPORT}}

# RabbitMQ private network URL
# Replace rabbitmq with your actual RabbitMQ service name in Railway.
CELERY_BROKER_URL=amqp://guest:guest@rabbitmq.railway.internal:5672/%2f
CELERY_RESULT_BACKEND=django-db

# Public domain config (web + worker both can have these)
ALLOWED_HOSTS=${{RAILWAY_PUBLIC_DOMAIN}}
CSRF_TRUSTED_ORIGINS=https://${{RAILWAY_PUBLIC_DOMAIN}}

# Proxy + SSL hardening
SECURE_PROXY_SSL_HEADER_NAME=HTTP_X_FORWARDED_PROTO
SECURE_PROXY_SSL_HEADER_VALUE=https
USE_X_FORWARDED_HOST=True
SECURE_SSL_REDIRECT=True
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_SECURE=True
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True

# Web-only (set on web service)
STATIC_ROOT=/app/staticfiles

# Optional
SUBSCRIPTION_WEBHOOK_SECRET=replace-with-provider-webhook-secret
