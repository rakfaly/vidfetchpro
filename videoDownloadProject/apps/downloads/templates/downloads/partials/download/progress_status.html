<div id="download-button-wrap" class="flex" hx-swap-oob="outerHTML">
    {% include "downloads/partials/download/button.html" with poll=poll|default:False %}
</div>
<div class="rounded-2xl border border-slate-200 p-4 dark:border-slate-800"
     {% if poll %} hx-get="{% url 'apps.downloads:progress_status' %}" hx-trigger="every 1s" hx-swap="outerHTML" {% endif %}>
    <div class="flex items-center justify-between text-sm font-semibold">
        <div class="flex items-center gap-3">
            <div id="spinner-download-start" class="w-4"></div>
            <span>{{ format_title }}
                {% if format.height %}
                    ({{ format.height }}p)
                {% else %}
                    (audio)
                {% endif %}
            </span>
        </div>
        <span data-progress-text>{{ download_progress|default:0 }}%</span>
    </div>
    <div class="mt-3 h-2 w-full rounded-full bg-slate-100 dark:bg-slate-800">
        <div class="h-2 rounded-full bg-brand-500 transition-all duration-300"
             data-progress
             style="width: {{ download_progress|default:0 }}%"></div>
    </div>
    <div class="mt-3 flex flex-wrap items-center gap-3 text-xs text-slate-500">
        <span>Status: <span data-status>{{ download_status|default:"Queued" }}</span></span>
        <span>Speed: <span data-speed>{{ download_speed|default:"—" }}</span></span>
        <span>ETA: <span data-eta>{{ download_eta|default:"0" }}</span></span>
        <span>Elapsed: <span data-elapsed>{{ download_elapsed|default:"—" }}</span></span>
    </div>
</div>
