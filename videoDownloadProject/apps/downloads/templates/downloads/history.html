<div class="flex pb-5 items-center justify-between">
    <h2 class="font-[var(--font-display)] text-lg font-semibold">Download history</h2>
        {% if user.is_authenticated %}
        <button id="themeToggle" class="btn-ghost pill inline-flex items-center gap-2 pl-2 pr-2">
            <span class="theme-label">Clear</span>
        </button>
        {% endif %}
</div>
{% for item in history_list %}
<div class="rounded-2xl border border-slate-200 p-4 text-sm dark:border-slate-800">
    <div class="flex items-center justify-between">
        <p class="font-semibold">{{ item.job.video|default:"Untitled" }}</p>
        <span class="text-xs {% if item.success %}text-emerald-500{% else %}text-rose-500{% endif %}">
            {{ item.success|yesno:"Completed,Failed" }}
        </span>
    </div>
    <div class="mt-2 flex flex-wrap gap-2 text-xs text-slate-500">
        <span>{{ item.job.format.container|upper }} Â· {{ item.job.format.quality_label|default:"N/A" }}</span>
        {% if item.job.output_filename %}
        <span>{{ item.job.output_filename }}</span>
        {% endif %}
        <span>{{ item.created_at|date:"M d, Y H:i" }}</span>
    </div>
</div>
{% empty %}
<p class="text-sm text-slate-500">No history yet.</p>
{% endfor %}