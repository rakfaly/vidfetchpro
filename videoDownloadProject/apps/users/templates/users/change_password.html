{% extends "base.html" %}
{% block title %}
    Change Password
{% endblock title %}
{% block content %}
    <section class="mx-auto w-full max-w-2xl space-y-6">
        <div class="card relative overflow-hidden">
            <div class="absolute inset-x-0 top-0 h-1 bg-linear-to-r from-brand-500 via-emerald-400 to-brand-700"></div>
            <h1 class="text-2xl font-semibold">Change Password</h1>
            <p class="mt-1 text-sm text-slate-500 dark:text-slate-400">Keep your account secure with a strong password.</p>
        </div>
        <div class="card space-y-6">
            <div class="space-y-1">
                <p class="text-xs uppercase tracking-[0.18em] text-slate-500">Security</p>
                <p class="text-lg font-semibold text-slate-900 dark:text-white">Update your password</p>
            </div>
            <form class="space-y-5"
                  method="post"
                  action="{% url 'apps.users:change_password' %}">
                {% csrf_token %}
                <div>
                    <label class="mb-1.5 block text-xs font-semibold uppercase tracking-wide text-slate-600 dark:text-slate-300">
                        Current password
                    </label>
                    {{ form.old_password }}
                    {% if form.old_password.errors %}
                        <p class="mt-1.5 text-xs text-rose-500">{{ form.old_password.errors|striptags }}</p>
                    {% endif %}
                </div>
                <div>
                    <label class="mb-1.5 block text-xs font-semibold uppercase tracking-wide text-slate-600 dark:text-slate-300">
                        New password
                    </label>
                    {{ form.new_password1 }}
                    {% if form.new_password1.errors %}
                        <p class="mt-1.5 text-xs text-rose-500">{{ form.new_password1.errors|striptags }}</p>
                    {% endif %}
                </div>
                <div>
                    <label class="mb-1.5 block text-xs font-semibold uppercase tracking-wide text-slate-600 dark:text-slate-300">
                        Confirm new password
                    </label>
                    {{ form.new_password2 }}
                    {% if form.new_password2.errors %}
                        <p class="mt-1.5 text-xs text-rose-500">{{ form.new_password2.errors|striptags }}</p>
                    {% endif %}
                </div>
                {% if form.non_field_errors %}
                    <div class="rounded-xl border border-rose-300 bg-rose-50 p-3 text-xs text-rose-600 dark:border-rose-800 dark:bg-rose-950/30 dark:text-rose-300">
                        {{ form.non_field_errors }}
                    </div>
                {% endif %}
                <div class="flex items-center justify-between gap-3 pt-1">
                    <a href="{% url 'profile' %}" class="btn btn-ghost">Back to profile</a>
                    <button class="btn btn-primary min-w-36" type="submit">Update password</button>
                </div>
            </form>
        </div>
    </section>
{% endblock content %}
